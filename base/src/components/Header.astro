---
import { Icon } from "astro-icon/components";
---

<header
	class="w-full py-4 px-4 border-b border-gray-200 bg-white sticky top-0 z-50"
	role="banner"
>
	<nav
		class="max-w-6xl mx-auto flex items-center justify-between"
		aria-label="Main navigation"
	>
		<a
			href="/"
			class="text-2xl font-bold text-gray-900 hover:text-gray-700 transition-colors"
			aria-label="Silverbeet Technology - Home"
		>
			Silverbeet Technology
		</a>

		<!-- Mobile menu button -->
		<button
			type="button"
			class="md:hidden p-2 text-gray-600 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-black focus:ring-offset-2 rounded-lg"
			aria-label="Toggle menu"
			aria-expanded="false"
			aria-controls="mobile-menu"
			id="mobile-menu-button"
		>
			<Icon name="tabler:menu-2" class="w-6 h-6" aria-hidden="true" />
		</button>

		<!-- Desktop navigation -->
		<ul class="hidden md:flex items-center gap-6" role="list">
			<li>
				<a
					href="/services"
					class="text-gray-600 hover:text-gray-900 transition-colors"
					aria-current={Astro.url.pathname === "/services" ? "page" : undefined}
				>
					Services
				</a>
			</li>
			<li>
				<a
					href="/about"
					class="text-gray-600 hover:text-gray-900 transition-colors"
					aria-current={Astro.url.pathname === "/about" ? "page" : undefined}
				>
					About
				</a>
			</li>
			<li>
				<a
					href="/contact"
					class="px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors"
					aria-current={Astro.url.pathname === "/contact" ? "page" : undefined}
				>
					Contact
				</a>
			</li>
		</ul>
	</nav>

	<!-- Mobile menu -->
	<div
		id="mobile-menu"
		class="hidden md:hidden border-t border-gray-200 bg-white"
		role="menu"
		aria-labelledby="mobile-menu-button"
	>
		<ul class="flex flex-col py-4" role="list">
			<li>
				<a
					href="/services"
					class="block px-4 py-3 text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors"
					role="menuitem"
					aria-current={Astro.url.pathname === "/services" ? "page" : undefined}
				>
					Services
				</a>
			</li>
			<li>
				<a
					href="/about"
					class="block px-4 py-3 text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors"
					role="menuitem"
					aria-current={Astro.url.pathname === "/about" ? "page" : undefined}
				>
					About
				</a>
			</li>
			<li>
				<a
					href="/contact"
					class="block px-4 py-3 text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors"
					role="menuitem"
					aria-current={Astro.url.pathname === "/contact" ? "page" : undefined}
				>
					Contact
				</a>
			</li>
		</ul>
	</div>
</header>

<script>
	// Mobile menu toggle functionality
	const menuButton = document.getElementById("mobile-menu-button");
	const mobileMenu = document.getElementById("mobile-menu");

	if (menuButton && mobileMenu) {
		menuButton.addEventListener("click", () => {
			const isExpanded = menuButton.getAttribute("aria-expanded") === "true";
			menuButton.setAttribute("aria-expanded", String(!isExpanded));
			mobileMenu.classList.toggle("hidden");
		});

		// Close menu when clicking outside
		document.addEventListener("click", (e) => {
			if (
				!menuButton.contains(e.target as Node) &&
				!mobileMenu.contains(e.target as Node) &&
				!mobileMenu.classList.contains("hidden")
			) {
				menuButton.setAttribute("aria-expanded", "false");
				mobileMenu.classList.add("hidden");
			}
		});

		// Close menu on escape key
		document.addEventListener("keydown", (e) => {
			if (e.key === "Escape" && !mobileMenu.classList.contains("hidden")) {
				menuButton.setAttribute("aria-expanded", "false");
				mobileMenu.classList.add("hidden");
				menuButton.focus();
			}
		});
	}
</script>
